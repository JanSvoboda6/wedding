<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wedding</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;200;300;400&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100;0,200;0,300;0,400;1,100;1,200;1,300;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="preload" href="./moontime.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="./josefin-slab.ttf" as="font" type="font/ttf" crossorigin>
</head>
<body>
<div class="top-bar">
    <p class="top-bar-text">v + j</p>
    <div class="timer" id="timer"></div>
    <p class="top-bar-button cross-out" id="toggle-audio-button" onClick="toggleAudio()">zvuk</p>
</div>
<div class="container">
    <div class="screen">
        <div class="heading">
            <div class="heading-text">veronika <br> + jan</div>
            <div class="picture"><img class="picture-bird" src="bird.svg" xmlns="http://www.w3.org/2000/svg"></div>
        </div>
    </div>

    <div class="screen" id="screen-second">
        <div class="space"></div>
        <div class="space"></div>
        <div class="section-bullet-points">
            <div class="column">
                <p class="section-text bold italic">Co:</p>
                <div class="space-tiny"></div>
                <p class="section-text impact-text">Svatba antonínská</p>
            </div>
            <div class="space"></div>
            <div class="column">
                <p class="section-text bold italic">Kdy: </p>
                <div class="space-tiny"></div>
                <p class="section-text impact-text">15.července 2023</p>
            </div>
            <div class="space"></div>
            <div class="column">
                <p class="section-text bold italic">Kde:</p>
                <div class="space-tiny"></div>
                <p class="section-text impact-text">Kaple sv.Antonína</p>
            </div>
        </div>
        <div class="space"></div>
        <div class="space"></div>
        <img class="picture-line" src="line.svg"/>
    </div>

    <div class="screen" id="screen-third">
        <div class="section">
            <div class="column">
                <h2 class="section-text text-huge-padding bold">Místo</h2>
                <div class="space-tiny"></div>
                <p class="section-text text-huge-padding">Celý náš den proběhne na samém vrchu blatnického kopce.
                    "Ano" si řekneme <nobr>v kapli</nobr> svatého Antonína.
                    Zbytek dne pak strávíme pod vzrostlými borovicemi
                    <nobr>u myslivecké</nobr> chaty. Tenisky <nobr>a nízké</nobr>  podpatky jsou vítány!</p>

            </div>
        </div>
        <div class="space"></div>
        <img class="picture-area" src="area.png"/>
        <div class="space"></div>
        <div class="space"></div>
        <img class="picture-line" src="line.svg"/>
    </div>

    <div class="screen-secondary" id="screen-fourth">
        <div class="section">
            <div class="column">
                <h2 class="section-text text-huge-padding bold">Dary</h2>
                <div class="space-tiny"></div>
                <p class="section-text text-huge-padding">Netrapte se přemýšlením nad tím,
                    jaký svatební dar nám koupit. Věřte, že nic materiálního
                    nepotřebujeme. <nobr>A pokud</nobr>  přesto nechcete přijít <nobr>s prázdnou</nobr>,
                    nejvíce oceníme finanční příspěvek <nobr>na společné</nobr>  bydlení. </p>
            </div>
        </div>
        <div class="space"></div>
        <div class="space"></div>
        <div class="section">
            <div class="column">
                <h2 class="section-text text-huge-padding bold">Ubytování</h2>
                <div class="space-tiny"></div>
                <p class="section-text text-huge-padding">Až bude samou únavou hrozit,
                    že se skutálíte z kopce do Blatnice,
                    nebude nic jednoduššího, než složit hlavu přímo <nobr>v myslivecké</nobr>
                    chatě. Vyspí se <nobr>v ní</nobr>  až 20 nocležníků,
                    tak neváhejte <nobr>a pište</nobr> , kdo máte <nobr> o ubytování</nobr> zájem. </p>
            </div>
        </div>
        <div class="space"></div>
        <div class="space"></div>
        <div class="space"></div>
        <img class="picture-line" src="line.svg"/>
    </div>

    <div class="screen-secondary" id="screen-fifth">
        <div class="section">
            <div class="column">
                <h2 class="section-text text-huge-padding bold">Dresscode</h2>
                <div class="space-tiny"></div>
                <p class="section-text text-huge-padding">...není! Na nic si nehrajeme,
                    <nobr>a to</nobr> ani na naší svatbě. Chcete přijít <nobr>v kraťasech</nobr>?
                    Přijďte! Léto <nobr>k tomu</nobr> vybízí. Kravata vás škrtí?
                    Zahoďte ji. Podpatky jsou otrava? Totálně rozumíme.
                    Mějte jenom na paměti, <nobr>že obřad</nobr> sice proběhne <nobr>v kostele</nobr>,
                    zbytek dne však strávíme na nerovném <nobr>a travnatém</nobr> povrchu. </p>
            </div>
        </div>
        <div class="space"></div>
        <div class="space"></div>
        <div class="section">
            <div class="column section-text-programme">
                <h2 class="section-text text-huge-padding bold">Program</h2>
                <div class="space-tiny"></div>
                <p class="section-text text-huge-padding">12:00
                    svatební obřad
                    <br><br>
                    13:00
                    svatební oběd
                    <br><br>
                    14:00
                    krájení dortu
                    <br><br>
                    16:00
                    příjezd ostatních hostů
                    <br><br>
                    18:00
                    večerní raut </p>
            </div>
        </div>
        <div class="space"></div>
        <div class="space"></div>
        <img class="picture-line" src="line.svg"/>
    </div>

    <div class="screen-secondary" id="screen-sixth" onmouseover="runStatistics()">
        <div class="space"></div>
        <div class="section">
            <div class="column">
                <span class="counter" id="counter-1"></span>
                <h2 class="section-text text-huge-padding text-center text-moontime">veronika + jan</h2>
                <div class="space"></div>

                <div class="section-text text-huge-padding section-bullet-points text-statistics">
                    <div class="bold" id="statistics-days">0</div>
                    <div>dní spolu</div>
                </div>
                <div class="space-tiny"></div>

                <div class="section-text text-huge-padding section-bullet-points text-statistics">
                    <div class="bold" id="statistics-countries">0</div>
                    <div>procestovaných zemí</div>
                </div>
                <div class="space-tiny"></div>

                <div class="section-text text-huge-padding section-bullet-points text-statistics">
                    <div class="bold" id="statistics-meals">0</div>
                    <div>spolu uvařených jídel</div>
                </div>
                <div class="space-tiny"></div>

                <div class="section-text text-huge-padding section-bullet-points text-statistics">
                    <div class="bold" id="statistics-kisses">0</div>
                    <div>pusinek</div>
                </div>

                <div class="picture"><img class="picture-us" src="us.png"></div>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    secondScreen = document.getElementById("screen-second");
    screenThird = document.getElementById("screen-third");
    screenFourth = document.getElementById("screen-fourth");

    var myScrollFunc = function () {
        var y = window.scrollY;
        if (y >= 10) {
            secondScreen.className = "screen-secondary show"
            screenThird.className = "screen-secondary show"
            screenFourth.className = "screen-secondary show"
        } else {
            secondScreen.className = ".screen-secondary hide"
            screenThird.className = ".screen-secondary hide"
            screenFourth.className = ".screen-secondary hide"
        }
    };

    window.addEventListener("scroll", myScrollFunc);

    const tl = gsap.timeline();

    tl.from(".picture-bird", 2.3, {
        opacity: 0,
        x: 500,
        ease: "power4.out",

        stagger: {
            amount: 0.5,
        },
    });

    tl.from(".heading-text", 2.3, {
            opacity: 0,
            ease: "power4.out",
            stagger: {
                amount: .3,
            },
        },
        "-=1.45"
    );

    tl.from(".timer", 2.3, {
            opacity: 0,
            x: 0,
            ease: "power4.out",
            stagger: {
                amount: 0.5,
            },
            delay: 1.5,
        },
        "-= 1"
    );


    tl.from(".reveal div", 1.8, {
            y: 200,
            width: 0,
            ease: "power4.out",
            stagger: {
                amount: .3,
            },
        },
        "-=1.5"
    );

    tl.from(".nav-item", 1.8, {
            opacity: 0,
            y: 100,
            ease: "power4.out",
            stagger: {
                amount: .8,
            },
        },
        "-=0.2"
    );

    var x = setInterval(function () {
        var ctx = {};
        var countDownDate = new Date('Jul 15 2023 12:00:00').getTime(),
            now = new Date().getTime(),
            diff = countDownDate - now,
            tweeks = Math.floor(diff / (1000 * 7 * 24 * 60 * 60)),
            tdays = Math.floor((diff / (1000 * 60 * 60 * 24))),
            thours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
            tminutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)),
            tseconds = Math.floor((diff % (1000 * 60)) / 1000);

        ctx.weeks = (tweeks < 10) ? '0' + tweeks : tweeks;
        ctx.days = (tdays < 10) ? '0' + tdays : tdays;
        ctx.hours = (thours < 10) ? '0' + thours : thours;
        ctx.minutes = (tminutes < 10) ? '0' + tminutes : tminutes;
        ctx.seconds = (tseconds < 10) ? '0' + tseconds : tseconds;

        if (diff < 0) {
            clearInterval(x);
        }

        document.getElementById("timer").innerHTML = ctx.days + "d " + ctx.hours + "h " + ctx.minutes + "m " + ctx.seconds + "s";
    }, 1000);

    var source = "./recording.mp3"
    var audio = document.createElement("audio");

    audio.src = source;
    button = document.getElementById("toggle-audio-button");

    function toggleAudio() {
        if (audio.paused) {
            audio.play();
            button.className = "top-bar-button"
        } else {
            audio.pause();
            button.className = "top-bar-button cross-out"
        }
    }

    function animate(obj, initVal, lastVal, duration) {
        let startTime = null;
        let currentTime = Date.now();
        const step = (currentTime) => {

            if (!startTime) {
                startTime = currentTime;
            }
            const progress = Math.min((currentTime - startTime) / duration, 1);

            obj.innerHTML = Math.floor(progress * (lastVal - initVal) + initVal) + "+";

            if (progress < 1) {
                window.requestAnimationFrame(step);
            } else {
                window.cancelAnimationFrame(window.requestAnimationFrame(step));
            }
        };
        window.requestAnimationFrame(step);
    }

    let daysCounter = document.getElementById("statistics-days");
    let countriesCounter = document.getElementById("statistics-countries");
    let mealsCounter = document.getElementById("statistics-meals");
    let kissesCounter = document.getElementById("statistics-kisses");

    let hasStatisticsBeenAlreadyShown = false;
    const runStatistics = () => {

        if (!hasStatisticsBeenAlreadyShown) {
            animate(daysCounter, 0, 2350, 2000);
            animate(countriesCounter, 0, 9, 2000);
            animate(mealsCounter, 0, 1000, 2000);
            animate(kissesCounter, 0, 10000, 2000);
            hasStatisticsBeenAlreadyShown = true;
        }
    }

    let screenWithStatistics = document.getElementById("screen-sixth");
    screenWithStatistics.addEventListener("touchstart", runStatistics);
    screenWithStatistics.addEventListener("touchmove", runStatistics);
</script>
</html>